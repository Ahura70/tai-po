<!doctype html>
<html lang="zh-HK">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<meta name="theme-color" content="#1a1a1a" />
<meta name="description" content="Wang Fuk Court Fire Relief - Find help, donate, volunteer | å¤§åŸ”å®ç¦è‹‘ç«ç½æ´åŠ©" />
<link rel="manifest" href="manifest.json">
<!-- Embedded Icon -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ†˜</text></svg>">
<title>å¤§åŸ”å®ç¦è‹‘ç«ç½æ´åŠ© | Wang Fuk Court Fire Relief</title>
<style>
  :root{
    --bg:#f0f2f5;
    --panel:#ffffff;
    --text:#1a1a1a;
    --primary:#cc0000; /* Red Cross Red for urgency */
    --primary-dark:#990000;
    --border:#e4e6eb;
    --muted:#65676b;
    --success:#34c759;
    --shadow:0 2px 8px rgba(0,0,0,0.08);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
  body{
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background:var(--bg);
    color:var(--text);
    line-height:1.5;
    padding-bottom:100px;
  }
  
  /* Header */
  .header{
    background: #1a1a1a;
    color:white;
    padding:16px 20px;
    position:sticky;
    top:0;
    z-index:1000;
  }
  .header-content{
    max-width:900px;
    margin:0 auto;
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .header-title{ font-size:18px; font-weight:700; }
  .header-subtitle{ font-size:12px; opacity:0.8; margin-top:2px; }
  
  /* Language Selector */
  .lang-btn{
    background:rgba(255,255,255,0.15);
    color:white;
    border:none;
    padding:6px 12px;
    border-radius:15px;
    font-size:13px;
    font-weight:600;
    cursor:pointer;
    display:flex;
    align-items:center;
    gap:6px;
  }
  .lang-menu{
    position:absolute;
    top:55px;
    right:20px;
    background:white;
    border-radius:12px;
    box-shadow:0 8px 24px rgba(0,0,0,0.2);
    display:none;
    z-index:2000;
    overflow:hidden;
    width: 180px;
  }
  .lang-menu.show{ display:block; }
  .lang-option{
    padding:12px 16px;
    cursor:pointer;
    border-bottom:1px solid #eee;
    color:#333;
    font-size:14px;
    display:flex;
    justify-content:space-between;
  }
  .lang-option.active{ background:#f5f5f5; font-weight:bold; color:var(--primary); }

  /* Emergency Banner */
  .emergency-banner{
    background:#fff3cd;
    border-bottom:1px solid #ffeeba;
    padding:12px 20px;
    color:#856404;
    font-size:13px;
    font-weight: 500;
    text-align: center;
  }

  /* Container */
  .container{ max-width:900px; margin:0 auto; padding:20px; }
  
  /* Search */
  .search-card{
    background:var(--panel);
    border-radius:16px;
    box-shadow:var(--shadow);
    padding:20px;
    margin-bottom:20px;
  }
  .search-label{ font-size:14px; font-weight:600; margin-bottom:10px; display:block; color: var(--muted); }
  .search-input-wrapper{
    display:flex;
    align-items:center;
    background:#f0f2f5;
    border-radius:12px;
    padding:4px 8px 4px 16px;
    border: 2px solid transparent;
    transition: 0.2s;
  }
  .search-input-wrapper:focus-within{ border-color: var(--primary); background: #fff; }
  .search-input{
    flex:1; border:none; background:transparent;
    font-size:16px; padding:12px 0; outline:none;
  }
  .voice-btn{
    background:var(--primary); color:white;
    border:none; width:40px; height:40px;
    border-radius:50%; cursor:pointer;
    display:flex; align-items:center; justify-content:center;
    font-size:18px; transition:0.2s;
  }
  .voice-btn.listening{ background:var(--success); animation: pulse 1.5s infinite; }
  @keyframes pulse{ 0%{transform:scale(1);} 50%{transform:scale(1.1);} 100%{transform:scale(1);} }

  /* Suggestions */
  .suggestions{
    margin-top: 10px;
    background:white; border-radius:12px;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
    display:none; overflow:hidden;
  }
  .suggestions.show{ display:block; }
  .suggestion-item{
    padding:14px; border-bottom:1px solid #eee;
    cursor:pointer; display:flex; align-items:center; gap:12px;
  }
  .suggestion-item:active { background: #f5f5f5; }

  /* Quick Actions Grid */
  .quick-actions{
    display:grid; grid-template-columns:repeat(auto-fill, minmax(100px, 1fr));
    gap:12px; margin-top: 20px;
  }
  .quick-btn{
    background:white; border:1px solid var(--border);
    border-radius:12px; padding:16px 8px;
    cursor:pointer; text-align:center; transition:0.2s;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    height: 100%;
  }
  .quick-btn:active{ transform:scale(0.98); background: #f9f9f9; }
  .quick-icon{ font-size:28px; margin-bottom:8px; }
  .quick-title{ font-size:12px; font-weight:600; line-height: 1.3; }

  /* Result Card */
  .result-card{
    background:var(--panel); border-radius:16px;
    box-shadow:var(--shadow); padding:24px;
    display:none; animation: slideUp 0.3s ease;
  }
  @keyframes slideUp { from {transform: translateY(20px); opacity: 0;} to {transform: translateY(0); opacity: 1;} }
  .result-card.show{ display:block; }
  
  .result-header{ display:flex; gap:16px; margin-bottom:20px; padding-bottom:16px; border-bottom:1px solid #eee; }
  .result-icon{ font-size:40px; }
  .result-title{ font-size:20px; font-weight:700; margin-bottom:4px; }
  
  .contact-item{
    background:#f8f9fa; padding:16px; border-radius:12px;
    margin-bottom:10px; display:flex; align-items:center; gap:16px;
  }
  .contact-value{ font-family: monospace; font-size: 15px; font-weight: 600; color: #333; user-select: all; }
  .copy-hint { font-size: 10px; color: var(--primary); margin-left: auto; font-weight: bold; text-transform: uppercase; }

  .btn{
    width: 100%; padding:14px; border-radius:12px;
    font-weight:600; cursor:pointer; border:none;
    margin-top: 10px; font-size: 16px;
  }
  .btn-primary{ background:var(--primary); color:white; }
  .btn-secondary{ background:#eee; color:#333; margin-top: 10px; }

  /* Install Banner */
  .install-banner{
    position:fixed; bottom:0; left:0; right:0;
    background:white; border-top: 1px solid #ddd;
    padding:16px 20px; display:none;
    align-items:center; justify-content:space-between;
    box-shadow: 0 -4px 10px rgba(0,0,0,0.05);
    z-index: 2000;
  }
  .install-banner.show{ display:flex; }
  .install-btn{
    background:var(--primary); color:white;
    border:none; padding:8px 20px; border-radius:20px;
    font-weight:600;
  }
</style>
</head>
<body>

<div class="header">
  <div class="header-content">
    <div>
      <div class="header-title" id="headerTitle">å¤§åŸ”å®ç¦è‹‘ç«ç½æ´åŠ©</div>
      <div class="header-subtitle" id="headerSubtitle">Wang Fuk Court Relief</div>
    </div>
    <button class="lang-btn" id="langBtn">
      <span id="currentLang">ç¹é«”ä¸­æ–‡</span> â–¾
    </button>
  </div>
</div>

<div class="lang-menu" id="langMenu">
  <div class="lang-option" data-lang="zh"><span>ç¹é«”ä¸­æ–‡</span></div>
  <div class="lang-option" data-lang="en"><span>English</span></div>
  <div class="lang-option" data-lang="tl"><span>Tagalog</span></div>
  <div class="lang-option" data-lang="id"><span>Bahasa Indonesia</span></div>
</div>

<div class="emergency-banner" id="emergencyBanner">
  ğŸš¨ å‚·äº¡æŸ¥è©¢ 1878 999 | å¿ƒç†æ”¯æ´ 18111
</div>

<div class="container">
  <div class="search-card">
    <label class="search-label" id="searchLabel">æˆ‘æƒ³è¦...</label>
    <div class="search-box">
      <div class="search-input-wrapper">
        <input type="text" class="search-input" id="searchInput" placeholder="æœå°‹..." autocomplete="off" />
        <button class="voice-btn" id="voiceBtn">ğŸ¤</button>
      </div>
      <div id="voiceStatus" style="font-size:12px; color:var(--primary); margin-top:8px; min-height:18px;"></div>
      <div class="suggestions" id="suggestions"></div>
    </div>
    <div class="quick-actions" id="quickActions"></div>
    <div style="text-align:center; margin-top:15px; font-size:12px; color:#999;" id="lastUpdated">
      Updates: 2025-11-28
    </div>
  </div>

  <div class="result-card" id="resultCard"></div>
</div>

<div class="install-banner" id="installBanner">
  <div>
    <div style="font-weight:700" id="installTitle">å®‰è£æ‡‰ç”¨ç¨‹å¼</div>
    <div style="font-size:12px; color:#666" id="installDesc">é›¢ç·šä½¿ç”¨ï¼Œå¿«é€Ÿå­˜å–</div>
  </div>
  <button class="install-btn" id="installBtn">Install</button>
  <div id="closeInstall" style="padding:10px; font-size:20px; color:#999; cursor:pointer;">&times;</div>
</div>

<script>
// --- Data & Config ---
const languages = {
  zh: { name: 'ç¹é«”ä¸­æ–‡', code: 'zh-HK' },
  en: { name: 'English', code: 'en-US' },
  tl: { name: 'Tagalog', code: 'tl-PH' },
  id: { name: 'Bahasa', code: 'id-ID' }
};

const texts = {
  zh: {
    title: 'å¤§åŸ”å®ç¦è‹‘ç«ç½æ´åŠ©', subtitle: 'æ”¯æ´è³‡è¨Šæ•´åˆå¹³å°',
    label: 'æˆ‘æƒ³è¦...', placeholder: 'æœå°‹ï¼šææ¬¾ã€ç¾©å·¥ã€ç‰©è³‡...',
    emergency: 'ğŸš¨ å‚·äº¡æŸ¥è©¢ 1878 999 | å¿ƒç†æ”¯æ´ 18111',
    installTitle: 'å®‰è£ App', installDesc: 'é›¢ç·šä½¿ç”¨ï¼Œæ›´ç©©å®š', installBtn: 'å®‰è£',
    contact: 'è¯çµ¡æ–¹å¼', details: 'è©³ç´°è³‡è¨Š', close: 'é—œé–‰',
    copy: 'è¤‡è£½', copied: 'å·²è¤‡è£½',
    lastUpdate: 'æœ€å¾Œæ›´æ–°ï¼š2025å¹´11æœˆ28æ—¥'
  },
  en: {
    title: 'Wang Fuk Court Relief', subtitle: 'Support Information Hub',
    label: 'I want to...', placeholder: 'Search: Donate, Volunteer, Supplies...',
    emergency: 'ğŸš¨ Casualty Enquiry 1878 999 | Mental Health 18111',
    installTitle: 'Install App', installDesc: 'Works offline, faster access', installBtn: 'Install',
    contact: 'Contact Info', details: 'Details', close: 'Close',
    copy: 'COPY', copied: 'COPIED',
    lastUpdate: 'Last Updated: Nov 28, 2025'
  },
  tl: {
    title: 'Tulong sa Sunog', subtitle: 'Wang Fuk Court Relief',
    label: 'Gusto ko...', placeholder: 'Maghanap: Donasyon, Tulong...',
    emergency: 'ğŸš¨ Casualty Enquiry 1878 999 | Mental Health 18111',
    installTitle: 'I-install', installDesc: 'Gumagana offline', installBtn: 'I-install',
    contact: 'Kontak', details: 'Detalye', close: 'Isara',
    copy: 'KOPYA', copied: 'KINOPYA',
    lastUpdate: 'Huling Update: Nov 28, 2025'
  },
  id: {
    title: 'Bantuan Kebakaran', subtitle: 'Wang Fuk Court Relief',
    label: 'Saya ingin...', placeholder: 'Cari: Donasi, Relawan...',
    emergency: 'ğŸš¨ Pertanyaan Korban 1878 999 | Mental 18111',
    installTitle: 'Instal App', installDesc: 'Akses offline cepat', installBtn: 'Instal',
    contact: 'Kontak', details: 'Detail', close: 'Tutup',
    copy: 'SALIN', copied: 'DISALIN',
    lastUpdate: 'Terakhir Diperbarui: 28 Nov 2025'
  }
};

const resources = {
  zh: [
    { icon:'ğŸ’°', title:'æ”¿åºœæ”¯æ´åŸºé‡‘', desc:'ç›´æ¥ææ¬¾å”åŠ©å—ç½å±…æ°‘', keywords:['ææ¬¾','éŒ¢','åŸºé‡‘'], contacts:[{l:'æ¸¯å¹£',v:'ä¸­åœ‹éŠ€è¡Œ 012-875-2-190159-7'}]},
    { icon:'â¤ï¸', title:'ç´…åå­—æœƒ', desc:'ç·Šæ€¥å¿ƒç†æ”¯æ´åŠç‰©è³‡', keywords:['ç´…åå­—æœƒ','æ€¥æ•‘'], contacts:[{l:'FPS è½‰æ•¸å¿«',v:'164279317'},{l:'æŸ¥è©¢',v:'relief@redcross.org.hk'}]},
    { icon:'ğŸ ', title:'è‡¨æ™‚ä½å®¿', desc:'ç‚ºå—ç½å®¶åº­æä¾›å±…æ‰€', keywords:['ä½','é…’åº—',' shelter'], contacts:[{l:'æ–°é´»åŸºåœ°ç”¢',v:'æä¾›160é–“å…è²»é…’åº—æˆ¿'},{l:'ImpactHK',v:'5341 6670'}]},
    { icon:'ğŸ“¦', title:'ç‰©è³‡æè´ˆ', desc:'è¡£ç‰©ã€æ¯›æ¯¯ã€æ—¥ç”¨å“', keywords:['ç‰©è³‡','è¡«','é£Ÿç‰©'], info:['âš ï¸ å¤šå€‹æ”¶é›†é»å·²çˆ†æ»¿ï¼Œè«‹å…ˆæŸ¥è©¢'], contacts:[{l:'æ”¿åºœç†±ç·š',v:'9213 2388'}]},
    { icon:'ğŸ‘·â€â™€ï¸', title:'å¤–å‚­æ”¯æ´', desc:'å¤šèªè¨€å”åŠ©ç†±ç·š', keywords:['å¤–å‚­','å·¥äºº','helper'], contacts:[{l:'HELP Hotline',v:'2523 4020'},{l:'å‹å·¥è™•',v:'2157 9537'}]},
    { icon:'ğŸš¨', title:'æ±‚åŠ©ç†±ç·š', desc:'å‚·äº¡æŸ¥è©¢åŠæƒ…ç·’æ”¯æ´', keywords:['æ±‚åŠ©','é›»è©±','å—å‚·'], contacts:[{l:'å‚·äº¡æŸ¥è©¢',v:'1878 999'},{l:'æƒ…ç·’æ”¯æ´',v:'18111'},{l:'ç¤¾ç½²',v:'2343 2255'}]}
  ],
  en: [
    { icon:'ğŸ’°', title:'Govt Relief Fund', desc:'Direct donation to victims', keywords:['donate','money','fund'], contacts:[{l:'HKD Account',v:'Bank of China 012-875-2-190159-7'}]},
    { icon:'â¤ï¸', title:'Red Cross', desc:'Emergency & Psych Support', keywords:['red cross','help'], contacts:[{l:'FPS ID',v:'164279317'},{l:'Email',v:'relief@redcross.org.hk'}]},
    { icon:'ğŸ ', title:'Temporary Housing', desc:'Shelter for families', keywords:['housing','hotel','shelter'], contacts:[{l:'SHKP',v:'160 Free Hotel Rooms'},{l:'ImpactHK',v:'5341 6670'}]},
    { icon:'ğŸ“¦', title:'Donate Supplies', desc:'Clothes, Blankets', keywords:['supplies','food'], info:['âš ï¸ Many collection points full'], contacts:[{l:'Govt Hotline',v:'9213 2388'}]},
    { icon:'ğŸ‘·â€â™€ï¸', title:'Helper Support', desc:'Multilingual Assistance', keywords:['helper','fdh','maid'], contacts:[{l:'HELP Hotline',v:'2523 4020'},{l:'Labour Dept',v:'2157 9537'}]},
    { icon:'ğŸš¨', title:'Emergency Lines', desc:'Casualty & Mental Health', keywords:['help','emergency'], contacts:[{l:'Casualty',v:'1878 999'},{l:'Mental Health',v:'18111'},{l:'SWD',v:'2343 2255'}]}
  ]
};
// Map Tagalog/Indonesian to English content for now (can be translated fully later)
resources.tl = resources.en;
resources.id = resources.en;

// --- App Logic ---
let lang = 'zh';
const dom = {
  headerTitle: document.getElementById('headerTitle'),
  headerSubtitle: document.getElementById('headerSubtitle'),
  currentLang: document.getElementById('currentLang'),
  langMenu: document.getElementById('langMenu'),
  emergencyBanner: document.getElementById('emergencyBanner'),
  searchLabel: document.getElementById('searchLabel'),
  searchInput: document.getElementById('searchInput'),
  quickActions: document.getElementById('quickActions'),
  resultCard: document.getElementById('resultCard'),
  suggestions: document.getElementById('suggestions'),
  installBanner: document.getElementById('installBanner'),
  voiceStatus: document.getElementById('voiceStatus'),
  lastUpdated: document.getElementById('lastUpdated')
};

// Auto-detect language
const userLang = navigator.language || navigator.userLanguage;
if(userLang.includes('en')) lang = 'en';
else if(userLang.includes('zh')) lang = 'zh';
else if(userLang.includes('tl') || userLang.includes('fil')) lang = 'tl';
else if(userLang.includes('id')) lang = 'id';

function renderApp() {
  const t = texts[lang];
  dom.headerTitle.innerText = t.title;
  dom.headerSubtitle.innerText = t.subtitle;
  dom.currentLang.innerText = languages[lang].name;
  dom.emergencyBanner.innerText = t.emergency;
  dom.searchLabel.innerText = t.label;
  dom.searchInput.placeholder = t.placeholder;
  dom.lastUpdated.innerText = t.lastUpdate;
  
  // Install Banner Texts
  document.getElementById('installTitle').innerText = t.installTitle;
  document.getElementById('installDesc').innerText = t.installDesc;
  document.getElementById('installBtn').innerText = t.installBtn;

  // Render Quick Actions
  dom.quickActions.innerHTML = resources[lang].map(r => `
    <div class="quick-btn" onclick="showDetail('${r.title}')">
      <div class="quick-icon">${r.icon}</div>
      <div class="quick-title">${r.title}</div>
    </div>
  `).join('');
  
  // Update Lang Menu
  document.querySelectorAll('.lang-option').forEach(el => {
    el.classList.toggle('active', el.dataset.lang === lang);
  });
}

// Search & Details
function showDetail(title) {
  const item = resources[lang].find(r => r.title === title);
  if(!item) return;
  
  dom.suggestions.style.display = 'none';
  dom.resultCard.innerHTML = `
    <div class="result-header">
      <div class="result-icon">${item.icon}</div>
      <div>
        <div class="result-title">${item.title}</div>
        <div style="color:#666">${item.desc}</div>
      </div>
    </div>
    ${item.info ? `<div style="background:#fff3cd; color:#856404; padding:10px; border-radius:8px; margin-bottom:15px; font-size:14px;">${item.info.join('<br>')}</div>` : ''}
    ${item.contacts.map(c => `
      <div class="contact-item" onclick="copyText('${c.value}', this)">
        <div style="flex:1">
          <div style="font-size:11px; color:#666; text-transform:uppercase;">${c.l}</div>
          <div class="contact-value">${c.value}</div>
        </div>
        <div class="copy-hint">${texts[lang].copy}</div>
      </div>
    `).join('')}
    <button class="btn btn-secondary" onclick="dom.resultCard.classList.remove('show')">${texts[lang].close}</button>
  `;
  dom.resultCard.classList.add('show');
  dom.resultCard.scrollIntoView({behavior:'smooth'});
}

window.copyText = (text, el) => {
  navigator.clipboard.writeText(text).then(() => {
    const hint = el.querySelector('.copy-hint');
    const original = hint.innerText;
    hint.innerText = texts[lang].copied;
    hint.style.color = 'green';
    setTimeout(() => { hint.innerText = original; hint.style.color = ''; }, 1500);
  });
};

dom.searchInput.addEventListener('input', (e) => {
  const val = e.target.value.toLowerCase();
  dom.resultCard.classList.remove('show');
  if(!val) { dom.suggestions.style.display = 'none'; return; }
  
  const matches = resources[lang].filter(r => 
    r.title.toLowerCase().includes(val) || 
    r.keywords.some(k => k.toLowerCase().includes(val))
  );
  
  dom.suggestions.innerHTML = matches.map(m => `
    <div class="suggestion-item" onclick="showDetail('${m.title}')">
      <span>${m.icon}</span> <span>${m.title}</span>
    </div>
  `).join('');
  dom.suggestions.style.display = matches.length ? 'block' : 'none';
});

// Lang Switcher
document.getElementById('langBtn').onclick = (e) => { e.stopPropagation(); dom.langMenu.classList.toggle('show'); };
document.querySelectorAll('.lang-option').forEach(opt => {
  opt.onclick = () => { lang = opt.dataset.lang; renderApp(); };
});
document.onclick = () => dom.langMenu.classList.remove('show');

// Voice Recognition
const VoiceObj = window.SpeechRecognition || window.webkitSpeechRecognition;
if(VoiceObj) {
  const recognition = new VoiceObj();
  recognition.continuous = false;
  document.getElementById('voiceBtn').onclick = () => {
    recognition.lang = languages[lang].code;
    try { recognition.start(); } catch(e){ recognition.stop(); }
  };
  recognition.onstart = () => {
    document.getElementById('voiceBtn').classList.add('listening');
    dom.voiceStatus.innerText = "Listening...";
  };
  recognition.onend = () => {
    document.getElementById('voiceBtn').classList.remove('listening');
    dom.voiceStatus.innerText = "";
  };
  recognition.onresult = (e) => {
    const transcript = e.results[0][0].transcript;
    dom.searchInput.value = transcript;
    dom.searchInput.dispatchEvent(new Event('input'));
  };
} else {
  document.getElementById('voiceBtn').style.display = 'none';
}

// PWA Install
let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  dom.installBanner.classList.add('show');
});
document.getElementById('installBtn').onclick = async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    deferredPrompt = null;
    dom.installBanner.classList.remove('show');
  }
};
document.getElementById('closeInstall').onclick = () => dom.installBanner.classList.remove('show');

// Init
if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
renderApp();
</script>
</body>
</html>